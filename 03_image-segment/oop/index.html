<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.17-DEV" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />

    
    <title>Object Oriented Pointer</title>
    <link href="/css/nucleus.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/hybrid.css" rel="stylesheet">
    <link href="/css/featherlight.min.css" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
    <link href="/css/hugo-theme.css" rel="stylesheet">
    <style type="text/css">:root #header + #content > #left > #rlblock_left
    {display:none !important;}</style>
    <style type="text/css">
#logo h1 {
    color: #FFFFFF;
    font-weight: 600;
    margin: 0;
    font-size: 3rem;
}
#chapter p {
    text-align: left;
}
code {
    white-space: pre-wrap;
}
#body-inner pre {
    white-space: pre;
}
#sidebar ul.topics ul {
    display: inherit;
    padding-bottom: 1rem;
    background-color: #251F29;
    margin-left: -1rem;
    margin-right: -1rem;
    padding-left: 1rem;
    padding-right: 1rem;
}
dl {
    margin: 3em;
}
dt, dd {
    display: inline;
}
dt {
    font-weight: bold;
    margin-left: -3em;
}
dt:after {
    content: ":";
    margin-right: 0.5em;
}
dd {
    -webkit-margin-start: 0;
    -moz-margin-start: 0;
}
dd:after {
    display: block; content: "";
}
</style>

  </head>
  <body class="" data-url="/">
    <nav id="sidebar">
  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://github.com/HPI-SWA-Teaching/SWT16-Project-14">
  <h1>Etoys</h1>
</a>

      
    </div>
</div>


  <div class="highlightable">
    <ul class="topics">
      
      
      
      

      <li class="dd-item  " data-nav-id="/00_setup/">
        <a href="/00_setup/">
          <span>
            
              <b>0. </b>
            
             Setup
           </span>
        </a>
        
        <ul>
          
          
          
          
            <li class="dd-item " data-nav-id="/00_setup/git-merge-driver/">
              <a href="/00_setup/git-merge-driver/">
                <span>Git MergeDriver</span>
              </a>
            </li>
          
          
        </ul>
        
      </li>
      
      
      
      

      <li class="dd-item  " data-nav-id="/01_upgrades/">
        <a href="/01_upgrades/">
          <span>
            
              <b>1. </b>
            
             Upgrades
           </span>
        </a>
        
        <ul>
          
          
          
          
            <li class="dd-item " data-nav-id="/01_upgrades/project-bug/">
              <a href="/01_upgrades/project-bug/">
                <span>#Project Bug</span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/01_upgrades/class-replacements/">
              <a href="/01_upgrades/class-replacements/">
                <span>Class Replacements</span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/01_upgrades/fonts/">
              <a href="/01_upgrades/fonts/">
                <span>Fonts</span>
              </a>
            </li>
          
          
        </ul>
        
      </li>
      
      
      
      

      <li class="dd-item  " data-nav-id="/02_project-file/">
        <a href="/02_project-file/">
          <span>
            
              <b>2. </b>
            
             Project file format
           </span>
        </a>
        
      </li>
      
      
      
      

      <li class="dd-item  parent" data-nav-id="/03_image-segment/">
        <a href="/03_image-segment/">
          <span>
            
              <b>3. </b>
            
             Image Segment
           </span>
        </a>
        
        <ul>
          
          
          
          
            <li class="dd-item " data-nav-id="/03_image-segment/object-header/">
              <a href="/03_image-segment/object-header/">
                <span>Object Headers</span>
              </a>
            </li>
          
          
          
            <li class="dd-item active" data-nav-id="/03_image-segment/oop/">
              <a href="/03_image-segment/oop/">
                <span>Object Oriented Pointer</span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/03_image-segment/object-formats/">
              <a href="/03_image-segment/object-formats/">
                <span>Object Formats</span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/03_image-segment/loading-process/">
              <a href="/03_image-segment/loading-process/">
                <span>Loading Process</span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/03_image-segment/test-segment-creation/">
              <a href="/03_image-segment/test-segment-creation/">
                <span>Test Image Segment Creation</span>
              </a>
            </li>
          
          
        </ul>
        
      </li>
      
      
      
      

      <li class="dd-item  " data-nav-id="/_x_resources/">
        <a href="/_x_resources/">
          <span>
            
              <b>X. </b>
            
             Resources
           </span>
        </a>
        
        <ul>
          
          
          
          
            <li class="dd-item " data-nav-id="/_x_resources/wiki/">
              <a href="/_x_resources/wiki/">
                <span>About this wiki</span>
              </a>
            </li>
          
          
        </ul>
        
      </li>
      
      
    </ul>
    <hr>
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fa fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>
    </section>
  </div>
</nav>

        <section id="body">
        <div id="overlay"></div>

        <div class="padding highlightable">

            <div id="top-bar">
              
              <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                  <span id="sidebar-toggle-span">
                      <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                        <i class="fa fa-bars"></i>
                      </a>
                  </span>
                
                
                
                
                  
                
                  
                
                  
                
                  
                    
                    
                <a href="/03_image-segment/" itemprop="url"><span itemprop="title">Image Segment</span></a> <i class="fa fa-angle-right"></i>
                    
                  
                
                  
                
                <span itemprop="title"> Object Oriented Pointer</span>
              </div>
              

            </div>
            
    	        <div id="body-inner">
                
                <h1>Object Oriented Pointer</h1>
                

<p>When an object contains an oop it isn&rsquo;t even sure that this is a real pointer. Because the last bit of the oop shows if it refers a real object or if it is a so called small integer. A zero means that it is a real pointer, a one that it is a small integer.</p>

<p>A small integer has 31 bit (the last one can&rsquo;t be used for the integer) and can be positive or negative. This means that it can encode every number from -0x40000000 to 0x3FFFFFFF (as usual the numbers are encoded using two&rsquo;s complement).</p>

<p>Now we&rsquo;ll look at the case that an oop is not a small integer. Since every word in squeak is 4 bytes long, the two least significant bits of all pointers are zero, which means that we have to check, if the bit at position 1 equals one. If that is the case we have an invalid pointer (this should obviously never happen).</p>

<p>A valid pointer can refer to an object in two different ways. If the value of the pointer is smaller than 0x80000004 the pointer points to an object inside of the segment. In that case the pointer contains the actual address of the object.</p>

<p>But if the value of the pointer is greater than 0x80000000 the pointer refers to an object outside of the segment. All outpointers are stored in the so called <code>outPointerArray</code>, and we need to select the right pointer in this array to find out which object is referred to. The value 0x80000004 refers to the first element of the array and the value 0x80000000 + n * 4 refers to the nth element of the array. This way we get the actual pointer to the object outside of the segment.</p>


      
      </div>
    </div>

    <div id="navigation">
        <a class="nav nav-prev" href="/03_image-segment/object-header"> <i class="fa fa-chevron-left"></i></a>
        <a class="nav nav-next" href="/03_image-segment/object-formats/" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/jquery-2.x.min.js"></script>
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/perfect-scrollbar.min.js"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="/js/jquery.sticky-kit.min.js"></script>
    <script src="/js/featherlight.min.js"></script>
    <script src="/js/html5shiv-printshiv.min.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js"></script>
    <script src="/js/learn.js"></script>
    <script src="/js/hugo-learn.js"></script>
    

  </body>
</html>

